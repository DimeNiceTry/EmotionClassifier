# ML Service - Сервис для задач машинного обучения

Объектная модель сервиса для задач машинного обучения. В сервисе пользователи могут запускать различные ML задачи, потребляя кредиты со своего баланса.

## Структура объектной модели

### Базовые сущности

- `Entity` - абстрактный базовый класс для всех сущностей
- `MLTask` - абстрактный класс для задач ML
- `UserRole` - абстрактный класс для ролей пользователей

### Пользователи и роли

- `User` - модель пользователя системы с хешированием паролей
- `RegularUserRole` - роль обычного пользователя системы
- `AdminRole` - роль администратора с расширенными полномочиями

### Балансы и транзакции

- `Balance` - модель баланса пользователя с методами пополнения и списания
- `Transaction` - модель транзакции (пополнение/списание кредитов)
- `TransactionType` - типы транзакций: пополнение, списание
- `TransactionStatus` - статусы транзакций: выполнена, ошибка

### Задачи ML

- `MLJob` - модель выполняемой работы по задаче ML
- `EmotionClassificationTask` - пример конкретной задачи ML (классификация эмоций)

## Ключевые особенности

### Безопасность

- Пароли хешируются с использованием bcrypt
- Метод `User.hash_password()` для создания хешей паролей
- Метод `User.verify_password()` для проверки паролей

### Управление балансом

- Отдельная сущность `Balance` для хранения и управления балансом пользователя
- Методы `top_up()` и `withdraw()` для пополнения и списания средств
- Связь с пользователем через поле `user_id`

### Выполнение ML задач

- Абстрактный класс `MLTask` с методами `validate_data()`, `predict()` и `get_cost()`
- Класс `MLJob` для отслеживания выполнения конкретных задач
- Поддержка валидации данных и обработка ошибок в процессе выполнения

## Принципы ООП в проекте

### Инкапсуляция

- Приватные поля с префиксом `_` 
- Публичные геттеры через декоратор `@property`

### Наследование

- Все сущности наследуются от `Entity`
- Роли пользователей наследуются от `UserRole`
- Задачи ML наследуются от `MLTask`

### Полиморфизм

- Абстрактные методы с разными реализациями в дочерних классах
- Например, `has_permission()` в разных ролях пользователей или `predict()` в разных задачах ML

## Требования

- Python 3.7+
- Пакеты: typing, numpy, uuid, abc, enum, datetime, bcrypt